{% extends "base.html" %}

{% block content %}
<div class="container-fluid m-0 p-0">
    <div class="row">
        <div class="col-12">
            <table class="table table-light table-striped table-sm table-light table-borderless table-hover" id="skedtable" autocomplete="off" spellcheck="false">
                <thead >
                    <tr>
                        <th colspan="10" style="font-size: 200%"><img class="manImg" src="static/pilot.png" width="130"
                                hspace="150">VFA-122 FLIGHT SCHEDULE<img class="manImg" src="static/nfo.png" width="140"
                                hspace="150"></th>
                    </tr>

                    <tr>
                        <th class="eevent">EVT</th>
                        <th class="ccallsign">C/S</th>
                        <th class="ttimes">BRF/TO/LND</th>
                        <th class="aaircraft">AIRCRAFT</th>
                        <th class="aaircrew">AIRCREW</th>
                        <th class="mmission">MSN</th>
                        <th class="llaunch">LNCH</th>
                        <th class="oout">10-OUT</th>
                        <th class="rrecover">RCVR</th>
                        <th class="rremarks">REMARKS</th>
                    </tr>

                </thead>
                <tbody>
                    {% for line in sked %}

                    <form class="schedule_form" action="/sked_edit/{{line.id}}" method="POST">
                        <tr id="{{line.id}}_form">
                            <td><input class="form-control" name="evt" type="text" value="{{line.evt}}"></td>
                            <td><input class="form-control" name="cs" type="text" value="{{line.callsign}}"></td>
                            <td><input class="form-control" name="tm" type="text" value="{{line.times}}"></td>
                            <td><input class="form-control" name="ac" type="text" value="{{line.aircraft}}"></td>
                            <td><input class="form-control" name="acrw" type="text" value="{{line.aircrew}}"></td>
                            <td><input class="form-control" name="msn" type="text" value="{{line.mission}}"></td>
                            <td><input class="form-control" name="lnch" type="text" value="{{line.launch}}"></td>
                            <td><input class="form-control" name="out" type="text" value="{{line.out}}"></td>
                            <td><input class="form-control" name="rcvr" type="text" value="{{line.recover}}"></td>
                            <td><input class="form-control" name="rmks" type="text" value="{{line.remarks}}"></td>
                            <td><button class="form-control d-none" type="submit" value="Submit"></td>
                        </tr>

                    </form>

                {% endfor %}
           </tbody>


            </table>
        </div>
    </div>
</div>
<form method="post" action="/schedule/upload" enctype="multipart/form-data">
    <input type=file name=file>
    <input type=submit value=Upload>
    <div>ONLY "SCHEDULE.csv" FILE ACCEPTED</div>
</form>

</body>

</html>

<script>
    $(".chatbox").removeClass("d-lg-inline");
    $(".chatbox").removeClass("col-lg-2");
    $("#main_content_div").removeClass("p-1");
    $("#main_content_div").removeClass("col-lg-10");
    $("#main_content_div").addClass("p-0 m-0");

    $(".schedule_form").submit(function (event) {
        event.preventDefault(); //prevent default action 
        var post_url = $(this).attr("action"); //get form action url
        var request_method = $(this).attr("method"); //get form GET/POST method
        var form_data = $(this).serialize(); //Encode form elements for submission

        $.ajax({
            url: post_url,
            type: request_method,
            data: form_data
        }).done(function (response) { //
            $("#" + response + "_form").addClass("bg-success");
        });
    });
    $("input").addClass("p-0 m-0");
    $("input").css('background-color','white');
</script>

{%endblock%}